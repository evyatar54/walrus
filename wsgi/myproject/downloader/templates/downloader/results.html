{% extends 'downloader/base.html' %}
{% block content %}
<div class="container main_app">
        <ul class="nav nav-tabs" style="margin:10px;">
            {% for engine in Answer %}
                {% if forloop.first %}
                    <li id="tab_{{engine}}" class="active" onclick="changeTab('{{engine}}')"><a>{{engine}}</a></li>
                {% else %}
                    <li id="tab_{{engine}}" onclick="changeTab('{{engine}}')" ><a>{{engine}}</a></li>
                {% endif %}
            {% endfor %}
        </ul>

        {% for engine, names in Answer.items %}

            {% if forloop.first %}
                <div id="tab_div_{{engine}}">
                    <script>
                        var currShownDiv = "tab_{{engine}}";
                    </script>
            {% else %}
                <div id="tab_div_{{engine}}" style="display:none">
            {% endif %}

                {% for name, results in names.items %}

                    <div class="result_header" data-toggle="collapse" data-target="#{{engine}}_{{forloop.counter}}_collapse">
                        <h2 class="result_h2">Results for "{{name}}": </h2>
                    </div>
                    <div id="{{engine}}_{{forloop.counter}}_collapse" class="collapse result_container">
                        <table class="table table-striped table-hover" id="{{engine}}_{{name}}_table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>General Info</th>
                                    <th>Seeds</th>
                                    <th>leeches</th>
                                    <th>Download</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for r in results %}
                                <tr class="tr" >
                                    <td class="td td-responsive">{{r.0}} </td>
                                    <td class="td td-responsive">{{r.1}} </td>
                                    <td class="td td-responsive">{{r.2}} </td>
                                    <td class="td td-responsive">{{r.3}} </td>
                                    <td class="td td-responsive">
                                        <a href="{{r.4}}" class="btn _pull-right myButton" title="Magnet Link">Download</a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {%endfor%}
                </div>
        {% endfor %}
</div>

<script>

var currShownDiv = "{% for key in Answer %}{%if forloop.first %}{{key}}{% else %}{%endif%}{% endfor %}";
function changeTab(engine) {

    $('#tab_'+currShownDiv).removeClass('active');
    $('#tab_'+engine).addClass('active');

    $('#tab_div_'+currShownDiv).css('display', 'none');
    $('#tab_div_'+engine).css('display', 'block');
    currShownDiv = engine;
}

</script>

{% endblock %}